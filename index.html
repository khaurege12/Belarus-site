<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º –≤ –ë–µ–ª–∞—Ä—É—Å–∏</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --color-white: #FFFFFF;
            --color-red: #C8313E;
            --color-green: #4A7C59;
            --color-light-gray: #F5F5F5;
            --color-dark-gray: #2C2C2C;
            --color-medium-gray: #6B6B6B;
            --color-accent-red: #D94452;
            --color-accent-green: #5A9270;
            --color-overlay: rgba(0, 0, 0, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            color: var(--color-dark-gray);
            background: var(--color-white);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid rgba(200, 49, 62, 0.1);
            animation: slideDown 0.6s ease-out;
            transition: all 0.3s ease;
        }

        header.scrolled {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.2rem 3rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--color-red) 0%, var(--color-green) 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .logo::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M20,50 L35,35 L50,50 L65,35 L80,50 L65,65 L50,50 L35,65 Z" fill="white" opacity="0.3"/><circle cx="50" cy="50" r="8" fill="white"/></svg>');
            background-size: cover;
        }

        .site-name {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--color-dark-gray);
            letter-spacing: -0.02em;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2.5rem;
            align-items: center;
        }

        nav a {
            text-decoration: none;
            color: var(--color-medium-gray);
            font-size: 0.95rem;
            font-weight: 400;
            transition: all 0.3s ease;
            position: relative;
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--color-red);
            transition: width 0.3s ease;
        }

        nav a:hover {
            color: var(--color-red);
        }

        nav a:hover::after {
            width: 100%;
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .user-menu {
            position: relative;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--color-red) 0%, var(--color-green) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-avatar:hover {
            transform: scale(1.1);
        }

        .user-dropdown {
            position: absolute;
            top: 120%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            min-width: 200px;
            display: none;
            padding: 0.5rem 0;
            z-index: 100;
        }

        .user-dropdown.show {
            display: block;
        }

        .user-dropdown a,
        .user-dropdown button {
            display: block;
            padding: 0.8rem 1.5rem;
            color: var(--color-dark-gray);
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .user-dropdown a:hover,
        .user-dropdown button:hover {
            background: var(--color-light-gray);
            color: var(--color-red);
        }

        .btn-small {
            padding: 0.6rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-outline {
            background: transparent;
            color: var(--color-red);
            border: 2px solid var(--color-red);
        }

        .btn-outline:hover {
            background: var(--color-red);
            color: white;
        }

        .mobile-menu-btn {
            display: none;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            padding: 8px;
        }

        .mobile-menu-btn span {
            width: 25px;
            height: 3px;
            background: var(--color-dark-gray);
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .mobile-menu-btn.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .mobile-menu-btn.active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        /* Hero Section */
        .hero {
            margin-top: 82px;
            height: 90vh;
            position: relative;
            display: flex;
            align-items: center;
            overflow: hidden;
            background: linear-gradient(to bottom, var(--color-light-gray) 0%, var(--color-white) 100%);
        }

        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(135deg, rgba(200, 49, 62, 0.03) 0%, rgba(74, 124, 89, 0.05) 100%),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(200, 49, 62, 0.02) 2px, rgba(200, 49, 62, 0.02) 4px);
            z-index: 0;
        }

        .hero-image {
            position: absolute;
            right: 0;
            top: 0;
            width: 55%;
            height: 100%;
            background: linear-gradient(to right, var(--color-white) 0%, transparent 15%, transparent 100%),
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600"><rect fill="%23F5F5F5" width="800" height="600"/><path d="M0,300 Q200,250 400,300 T800,300 L800,600 L0,600 Z" fill="%234A7C59" opacity="0.1"/><circle cx="150" cy="150" r="80" fill="%23C8313E" opacity="0.05"/><circle cx="650" cy="400" r="120" fill="%234A7C59" opacity="0.08"/></svg>');
            background-size: cover;
            background-position: center;
            z-index: 1;
            opacity: 0;
            animation: fadeInRight 1.2s ease-out 0.3s forwards;
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .hero-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 3rem;
            position: relative;
            z-index: 2;
            opacity: 0;
            animation: fadeInUp 1s ease-out 0.5s forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 4rem;
            font-weight: 700;
            line-height: 1.2;
            color: var(--color-dark-gray);
            max-width: 600px;
            margin-bottom: 1.5rem;
            letter-spacing: -0.03em;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--color-medium-gray);
            max-width: 500px;
            margin-bottom: 2.5rem;
            line-height: 1.7;
            font-weight: 300;
        }

        .hero-buttons {
            display: flex;
            gap: 1.5rem;
        }

        .btn {
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--color-red);
            color: var(--color-white);
            box-shadow: 0 4px 20px rgba(200, 49, 62, 0.2);
        }

        .btn-primary:hover {
            background: var(--color-accent-red);
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(200, 49, 62, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--color-dark-gray);
            border: 2px solid var(--color-dark-gray);
        }

        .btn-secondary:hover {
            background: var(--color-dark-gray);
            color: var(--color-white);
            transform: translateY(-2px);
        }

        /* Statistics Counter Section */
        .stats-section {
            background: var(--color-dark-gray);
            padding: 4rem 3rem;
            color: var(--color-white);
        }

        .stats-grid {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 3rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--color-red);
            margin-bottom: 0.5rem;
            display: block;
        }

        .stat-label {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 300;
        }

        /* Section Styling */
        section {
            padding: 6rem 3rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--color-dark-gray);
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: var(--color-medium-gray);
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.7;
            font-weight: 300;
        }

        /* Projects Gallery */
        .filter-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.7rem 1.5rem;
            background: var(--color-white);
            border: 2px solid var(--color-medium-gray);
            color: var(--color-medium-gray);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            border-color: var(--color-red);
            color: var(--color-red);
        }

        .filter-btn.active {
            background: var(--color-red);
            border-color: var(--color-red);
            color: var(--color-white);
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2.5rem;
        }

        .project-card {
            background: var(--color-white);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(200, 49, 62, 0.1);
            transition: all 0.4s ease;
            cursor: pointer;
        }

        .project-card.hidden {
            display: none;
        }

        .project-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 45px rgba(0, 0, 0, 0.1);
        }

        .project-image {
            width: 100%;
            height: 220px;
            background: linear-gradient(135deg, var(--color-green) 0%, var(--color-accent-green) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: var(--color-white);
            position: relative;
            overflow: hidden;
        }

        .project-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><circle cx="50" cy="50" r="30" fill="white" opacity="0.1"/><circle cx="150" cy="150" r="40" fill="white" opacity="0.1"/></svg>');
        }

        .project-tag {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--color-white);
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--color-green);
        }

        .project-content {
            padding: 2rem;
        }

        .project-content h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            color: var(--color-dark-gray);
            margin-bottom: 0.8rem;
            font-weight: 600;
        }

        .project-content p {
            color: var(--color-medium-gray);
            line-height: 1.7;
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }

        .project-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .project-date {
            font-size: 0.85rem;
            color: var(--color-medium-gray);
        }

        .project-participants {
            font-size: 0.85rem;
            color: var(--color-green);
            font-weight: 600;
        }

        /* Dashboard Section */
        .dashboard-section {
            background: var(--color-light-gray);
            min-height: 80vh;
            display: none;
        }

        .dashboard-section.show {
            display: block;
        }

        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .dashboard-header {
            background: var(--color-white);
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        .dashboard-header h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.2rem;
            color: var(--color-dark-gray);
            margin-bottom: 0.5rem;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .dashboard-stat-card {
            background: var(--color-white);
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid var(--color-red);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .dashboard-stat-card h3 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-red);
            margin-bottom: 0.5rem;
        }

        .dashboard-stat-card p {
            color: var(--color-medium-gray);
            font-size: 0.9rem;
        }

        .my-projects-grid {
            display: grid;
            gap: 1.5rem;
        }

        .my-project-card {
            background: var(--color-white);
            padding: 2rem;
            border-radius: 10px;
            display: grid;
            grid-template-columns: 80px 1fr auto;
            gap: 2rem;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .my-project-card:hover {
            transform: translateX(5px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
        }

        .my-project-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--color-red) 0%, var(--color-green) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }

        .my-project-info h4 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            color: var(--color-dark-gray);
            margin-bottom: 0.5rem;
        }

        .my-project-info p {
            color: var(--color-medium-gray);
            font-size: 0.9rem;
        }

        .my-project-status {
            padding: 0.5rem 1rem;
            background: rgba(74, 124, 89, 0.1);
            color: var(--color-green);
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--color-overlay);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            animation: fadeIn 0.3s ease;
        }

        .modal.show {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--color-white);
            padding: 3rem;
            border-radius: 12px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            font-size: 2rem;
            cursor: pointer;
            color: var(--color-medium-gray);
            background: none;
            border: none;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            color: var(--color-red);
            transform: rotate(90deg);
        }

        .modal-content h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            color: var(--color-dark-gray);
            margin-bottom: 1.5rem;
        }

        /* Auth Forms */
        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            font-weight: 500;
            color: var(--color-dark-gray);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--color-light-gray);
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--color-red);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-submit {
            width: 100%;
            padding: 1.2rem;
            background: var(--color-red);
            color: var(--color-white);
            border: none;
            border-radius: 6px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-submit:hover {
            background: var(--color-accent-red);
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(200, 49, 62, 0.4);
        }

        .form-submit:disabled {
            background: var(--color-medium-gray);
            cursor: not-allowed;
            transform: none;
        }

        .form-toggle {
            text-align: center;
            margin-top: 1rem;
            color: var(--color-medium-gray);
        }

        .form-toggle a {
            color: var(--color-red);
            cursor: pointer;
            text-decoration: underline;
        }

        .form-toggle a:hover {
            color: var(--color-accent-red);
        }

        .error-message {
            padding: 1rem;
            background: rgba(200, 49, 62, 0.1);
            border: 1px solid var(--color-red);
            border-radius: 6px;
            color: var(--color-red);
            font-size: 0.9rem;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .success-message {
            padding: 1rem;
            background: rgba(74, 124, 89, 0.1);
            border: 1px solid var(--color-green);
            border-radius: 6px;
            color: var(--color-green);
            font-size: 0.9rem;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        /* Footer */
        footer {
            background: var(--color-dark-gray);
            color: var(--color-white);
            padding: 3rem;
            text-align: center;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
        }

        .footer-ornament {
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, var(--color-red) 0%, var(--color-green) 100%);
            margin: 0 auto 2rem;
        }

        footer p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .projects-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }

            .dashboard-stats {
                grid-template-columns: 1fr;
            }

            .my-project-card {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                padding: 1rem 1.5rem;
            }

            nav ul {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: var(--color-white);
                flex-direction: column;
                padding: 2rem;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            }

            nav ul.show {
                display: flex;
            }

            .mobile-menu-btn {
                display: flex;
            }

            .hero {
                height: auto;
                padding: 4rem 0;
            }

            .hero-image {
                display: none;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero-buttons {
                flex-direction: column;
            }

            section {
                padding: 4rem 1.5rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .filter-buttons {
                justify-content: flex-start;
                overflow-x: auto;
                flex-wrap: nowrap;
                padding-bottom: 1rem;
            }

            .projects-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                padding: 2rem;
                margin: 1rem;
            }

            .auth-buttons {
                flex-direction: column;
                width: 100%;
            }

            .btn-small {
                width: 100%;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo" onclick="window.location.href='#home'"></div>
                <div class="site-name">–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å</div>
            </div>
            <nav id="nav">
                <ul id="navMenu">
                    <li><a href="#stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a></li>
                    <li><a href="#projects">–ü—Ä–æ–µ–∫—Ç—ã</a></li>
                    <li id="dashboardLink" style="display: none;"><a href="#dashboard">–ú–æ–π –∫–∞–±–∏–Ω–µ—Ç</a></li>
                    <li id="authButtons" class="auth-buttons">
                        <button class="btn-small btn-outline" onclick="openLoginModal()">–í–æ–π—Ç–∏</button>
                        <button class="btn-small btn-primary" onclick="openRegisterModal()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                    </li>
                    <li id="userMenuContainer" class="user-menu" style="display: none;">
                        <div class="user-avatar" id="userAvatar" onclick="toggleUserDropdown()"></div>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="#dashboard" onclick="showDashboard()">–ú–æ–π –∫–∞–±–∏–Ω–µ—Ç</a>
                            <button onclick="logout()">–í—ã–π—Ç–∏</button>
                        </div>
                    </li>
                </ul>
            </nav>
            <div class="mobile-menu-btn" id="mobileMenuBtn">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-background"></div>
        <div class="hero-image"></div>
        <div class="hero-content">
            <h1>–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –ë–µ–ª–∞—Ä—É—Å–∏</h1>
            <p class="hero-subtitle">–í–º–µ—Å—Ç–µ –º—ã —Å–æ–∑–¥–∞—ë–º –±—É–¥—É—â–µ–µ, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ —É–≤–∞–∂–µ–Ω–∏–∏, —Ç—Ä—É–¥–µ –∏ –∑–∞–±–æ—Ç–µ –æ –Ω–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ –∏ –ª—é–¥—è—Ö</p>
            <div class="hero-buttons">
                <a href="#projects" class="btn btn-primary">–ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã</a>
                <button class="btn btn-secondary" id="heroJoinBtn" onclick="handleHeroJoinClick()">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
            </div>
        </div>
    </section>

    <!-- Statistics Section -->
    <section id="stats" class="stats-section">
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-number" data-target="15847">0</span>
                <span class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" data-target="234">0</span>
                <span class="stat-label">–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" data-target="67">0</span>
                <span class="stat-label">–ù–∞—Å–µ–ª—ë–Ω–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" data-target="89">0</span>
                <span class="stat-label">–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π</span>
            </div>
        </div>
    </section>

    <!-- Projects Gallery Section -->
    <section id="projects">
        <div class="section-header">
            <h2 class="section-title">–ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã</h2>
            <p class="section-subtitle">–†–µ–∞–ª—å–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã –≥—Ä–∞–∂–¥–∞–Ω, –º–µ–Ω—è—é—â–∏–µ –∂–∏–∑–Ω—å –≤ –ë–µ–ª–∞—Ä—É—Å–∏ –∫ –ª—É—á—à–µ–º—É</p>
        </div>
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</button>
            <button class="filter-btn" data-filter="ecology">–≠–∫–æ–ª–æ–≥–∏—è</button>
            <button class="filter-btn" data-filter="education">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</button>
            <button class="filter-btn" data-filter="social">–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å</button>
            <button class="filter-btn" data-filter="culture">–ö—É–ª—å—Ç—É—Ä–∞</button>
        </div>
        <div class="projects-grid" id="projectsGrid">
            <!-- Projects will be generated by JavaScript -->
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard" class="dashboard-section">
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h2>–ú–æ–π –∫–∞–±–∏–Ω–µ—Ç</h2>
                <p id="userEmail" style="color: var(--color-medium-gray);"></p>
            </div>

            <div class="dashboard-stats">
                <div class="dashboard-stat-card">
                    <h3 id="dashboardProjectsCount">0</h3>
                    <p>–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
                </div>
                <div class="dashboard-stat-card">
                    <h3 id="dashboardHoursCount">0</h3>
                    <p>–ß–∞—Å–æ–≤ –≤–æ–ª–æ–Ω—Ç—ë—Ä—Å—Ç–≤–∞</p>
                </div>
                <div class="dashboard-stat-card">
                    <h3 id="dashboardImpactCount">0</h3>
                    <p>–õ—é–¥–µ–π –ø–æ–º–æ–≥–ª–∏</p>
                </div>
            </div>

            <div>
                <h3 style="font-family: 'Cormorant Garamond', serif; font-size: 2rem; margin-bottom: 2rem;">–ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã</h3>
                <div class="my-projects-grid" id="myProjectsGrid">
                    <div style="text-align: center; padding: 3rem; color: var(--color-medium-gray);">
                        <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
                        <a href="#projects" class="btn btn-primary" style="margin-top: 1rem;">–í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-ornament"></div>
            <p>–í–º–µ—Å—Ç–µ –º—ã —Å–æ–∑–¥–∞—ë–º –±—É–¥—É—â–µ–µ, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, —É–≤–∞–∂–µ–Ω–∏–∏ –∏ –∑–∞–±–æ—Ç–µ –æ –Ω–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ</p>
            <p style="margin-top: 1rem; font-size: 0.85rem; opacity: 0.6;">¬© 2026 –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º –≤ –ë–µ–ª–∞—Ä—É—Å–∏</p>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('loginModal')">&times;</button>
            <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
            <div class="error-message" id="loginError"></div>
            <form class="auth-form" id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required placeholder="example@email.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="loginPassword" required placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                </div>
                <button type="submit" class="form-submit" id="loginBtn">–í–æ–π—Ç–∏</button>
            </form>
            <div class="form-toggle">
                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a onclick="switchToRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('registerModal')">&times;</button>
            <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
            <div class="error-message" id="registerError"></div>
            <form class="auth-form" id="registerForm">
                <div class="form-group">
                    <label for="registerName">–ü–æ–ª–Ω–æ–µ –∏–º—è</label>
                    <input type="text" id="registerName" required placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required placeholder="example@email.com">
                </div>
                <div class="form-group">
                    <label for="registerPhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" id="registerPhone" required placeholder="+375 (XX) XXX-XX-XX">
                </div>
                <div class="form-group">
                    <label for="registerRegion">–†–µ–≥–∏–æ–Ω</label>
                    <select id="registerRegion" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω</option>
                        <option value="minsk">–≥. –ú–∏–Ω—Å–∫</option>
                        <option value="minskaya">–ú–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="brestskaya">–ë—Ä–µ—Å—Ç—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="vitebskaya">–í–∏—Ç–µ–±—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="gomelskaya">–ì–æ–º–µ–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="grodnenskaya">–ì—Ä–æ–¥–Ω–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="mogilevskaya">–ú–æ–≥–∏–ª—ë–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="registerPassword">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="registerPassword" required placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤">
                </div>
                <button type="submit" class="form-submit" id="registerBtn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </form>
            <div class="form-toggle">
                –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a onclick="switchToLogin()">–í–æ–π—Ç–∏</a>
            </div>
        </div>
    </div>

    <!-- Project Join Modal -->
    <div class="modal" id="projectJoinModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('projectJoinModal')">&times;</button>
            <div id="projectJoinContent"></div>
        </div>
    </div>

    <script>
        // ============================================
        // SUPABASE CONFIGURATION
        // ============================================
        // –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –∏–∑ Supabase
        const SUPABASE_URL = 'https://dfyqoeukfpddhjfmkhjz.supabase.co'; // –Ω–∞–ø—Ä–∏–º–µ—Ä: https://xxxxx.supabase.co
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRmeXFvZXVrZnBkZGhqZm1raGp6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA1ODg5OTQsImV4cCI6MjA4NjE2NDk5NH0.eE4C8QEjha1cO3DA2ZQahsVIKnSbGz6Dlw8cr4Vxqq0';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Supabase —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
        let supabaseClient = null;
        
        // –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        function initSupabase() {
            if (!window.supabase) {
                console.error('Supabase library not loaded. Please check your internet connection.');
                return null;
            }
            
            if (SUPABASE_URL === 'YOUR_SUPABASE_URL' || SUPABASE_ANON_KEY === 'YOUR_SUPABASE_ANON_KEY') {
                console.warn('‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –í—ã –Ω–µ –∑–∞–º–µ–Ω–∏–ª–∏ SUPABASE_URL –∏ SUPABASE_ANON_KEY –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!');
                console.warn('–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: Settings ‚Üí API –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ Supabase');
                return null;
            }
            
            try {
                return window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            } catch (error) {
                console.error('Error initializing Supabase:', error);
                return null;
            }
        }

        // –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        let currentUser = null;

        // ============================================
        // PROJECTS DATA
        // ============================================
        const projectsData = [
            {
                id: 1,
                category: 'ecology',
                icon: 'üå≥',
                title: '–ó–µ–ª—ë–Ω—ã–π –≥–æ—Ä–æ–¥',
                description: '–í—ã—Å–∞–¥–∫–∞ –¥–µ—Ä–µ–≤—å–µ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–µ–ª—ë–Ω—ã—Ö –∑–æ–Ω –≤ –≥–æ—Ä–æ–¥—Å–∫–∏—Ö —Ä–∞–π–æ–Ω–∞—Ö. –£–∂–µ –ø–æ—Å–∞–∂–µ–Ω–æ –±–æ–ª–µ–µ 5000 –¥–µ—Ä–µ–≤—å–µ–≤.',
                date: '2025-2026',
                participants: 450,
                hours: 120
            },
            {
                id: 2,
                category: 'education',
                icon: 'üìö',
                title: '–ó–Ω–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö',
                description: '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –¥–ª—è –¥–µ—Ç–µ–π –∏–∑ –º–∞–ª–æ–æ–±–µ—Å–ø–µ—á–µ–Ω–Ω—ã—Ö —Å–µ–º–µ–π –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø—Ä–µ–¥–º–µ—Ç–∞–º.',
                date: '2024-–Ω.–≤.',
                participants: 1200,
                hours: 240
            },
            {
                id: 3,
                category: 'social',
                icon: '‚ù§Ô∏è',
                title: '–ó–∞–±–æ—Ç–∞ –æ —Å—Ç–∞—Ä—à–∏—Ö',
                description: '–ü–æ–º–æ—â—å –ø–æ–∂–∏–ª—ã–º –ª—é–¥—è–º: –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –ª–µ–∫–∞—Ä—Å—Ç–≤, –ø–æ–º–æ—â—å –ø–æ —Ö–æ–∑—è–π—Å—Ç–≤—É –∏ –ø—Ä–æ—Å—Ç–æ –æ–±—â–µ–Ω–∏–µ.',
                date: '2023-–Ω.–≤.',
                participants: 320,
                hours: 180
            },
            {
                id: 4,
                category: 'culture',
                icon: 'üé≠',
                title: '–ö—É–ª—å—Ç—É—Ä–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–∏–µ',
                description: '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –ø–∞–º—è—Ç–Ω–∏–∫–æ–≤ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫—É–ª—å—Ç—É—Ä–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –≤ —Ä–µ–≥–∏–æ–Ω–∞—Ö.',
                date: '2025',
                participants: 280,
                hours: 90
            },
            {
                id: 5,
                category: 'ecology',
                icon: '‚ôªÔ∏è',
                title: '–ß–∏—Å—Ç—ã–µ —Ä–µ–∫–∏',
                description: '–û—á–∏—Å—Ç–∫–∞ –≤–æ–¥–æ—ë–º–æ–≤ –∏ –ø—Ä–∏–±—Ä–µ–∂–Ω—ã—Ö —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø—É–Ω–∫—Ç–æ–≤ —Ä–∞–∑–¥–µ–ª—å–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –º—É—Å–æ—Ä–∞.',
                date: '2025-–Ω.–≤.',
                participants: 600,
                hours: 150
            },
            {
                id: 6,
                category: 'education',
                icon: 'üíª',
                title: '–¶–∏—Ñ—Ä–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å',
                description: '–û–±—É—á–µ–Ω–∏–µ –ø–æ–∂–∏–ª—ã—Ö –ª—é–¥–µ–π —Ä–∞–±–æ—Ç–µ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º, —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–º –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–µ—Ä–≤–∏—Å–∞–º–∏.',
                date: '2024-2026',
                participants: 180,
                hours: 200
            },
            {
                id: 7,
                category: 'social',
                icon: 'üè†',
                title: '–¢—ë–ø–ª—ã–π –¥–æ–º',
                description: '–†–µ–º–æ–Ω—Ç –∂–∏–ª—å—è –¥–ª—è –Ω—É–∂–¥–∞—é—â–∏—Ö—Å—è —Å–µ–º–µ–π –∏ –æ–¥–∏–Ω–æ–∫–∏—Ö –ø–æ–∂–∏–ª—ã—Ö –ª—é–¥–µ–π —Å–∏–ª–∞–º–∏ –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤.',
                date: '2025',
                participants: 250,
                hours: 160
            },
            {
                id: 8,
                category: 'culture',
                icon: 'üé®',
                title: '–ò—Å–∫—É—Å—Å—Ç–≤–æ –≤ –º–∞—Å—Å—ã',
                description: '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã –ø–æ –∂–∏–≤–æ–ø–∏—Å–∏, –º—É–∑—ã–∫–µ –∏ —Ä—É–∫–æ–¥–µ–ª–∏—é –¥–ª—è –¥–µ—Ç–µ–π –∏ –≤–∑—Ä–æ—Å–ª—ã—Ö.',
                date: '2024-–Ω.–≤.',
                participants: 500,
                hours: 100
            },
            {
                id: 9,
                category: 'ecology',
                icon: 'üå∏',
                title: '–¶–≤–µ—Ç—É—â–∏–µ –¥–≤–æ—Ä—ã',
                description: '–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –æ–∑–µ–ª–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–¥–æ–º–æ–≤—ã—Ö —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å –∂–∏—Ç–µ–ª—è–º–∏.',
                date: '2025-2026',
                participants: 380,
                hours: 80
            }
        ];

        // ============================================
        // AUTH FUNCTIONS
        // ============================================

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        async function checkSession() {
            const { data: { session } } = await supabaseClient.auth.getSession();
            if (session) {
                currentUser = session.user;
                updateUIForLoggedInUser();
                await loadUserData();
            }
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        async function register(email, password, name, phone, region) {
            try {
                // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Supabase Auth
                // –¢—Ä–∏–≥–≥–µ—Ä –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–æ—Ñ–∏–ª—å
                const { data, error } = await supabaseClient.auth.signUp({
                    email: email,
                    password: password,
                    options: {
                        emailRedirectTo: window.location.origin + window.location.pathname,
                        data: {
                            full_name: name,
                            phone: phone,
                            region: region
                        }
                    }
                });

                if (error) throw error;

                // –í–ê–ñ–ù–û: Supabase –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏–Ω–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                // –ú—ã –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–µ–º, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à—ë–ª –≤—Ä—É—á–Ω—É—é
                if (data.session) {
                    await supabaseClient.auth.signOut();
                    currentUser = null;
                }

                return { success: true, data };
            } catch (error) {
                return { success: false, error: error.message };
            }
        }

        // –í—Ö–æ–¥
        async function login(email, password) {
            try {
                const { data, error } = await supabaseClient.auth.signInWithPassword({
                    email: email,
                    password: password
                });

                if (error) throw error;

                currentUser = data.user;
                updateUIForLoggedInUser();
                await loadUserData();

                return { success: true };
            } catch (error) {
                return { success: false, error: error.message };
            }
        }

        // –í—ã—Ö–æ–¥
        async function logout() {
            try {
                await supabaseClient.auth.signOut();
                currentUser = null;
                updateUIForLoggedOutUser();
                showMessage('–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'success');
                window.location.href = '#home';
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'error');
                console.error('Logout error:', error);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –¥–ª—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUIForLoggedInUser() {
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userMenuContainer').style.display = 'block';
            document.getElementById('dashboardLink').style.display = 'block';
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
            const initials = currentUser.user_metadata.full_name 
                ? currentUser.user_metadata.full_name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase()
                : currentUser.email[0].toUpperCase();
            document.getElementById('userAvatar').textContent = initials;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ hero
            updateHeroButton();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –¥–ª—è —Ä–∞–∑–ª–æ–≥–∏–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUIForLoggedOutUser() {
            document.getElementById('authButtons').style.display = 'flex';
            document.getElementById('userMenuContainer').style.display = 'none';
            document.getElementById('dashboardLink').style.display = 'none';
            document.querySelector('.dashboard-section').classList.remove('show');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ hero
            updateHeroButton();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function loadUserData() {
            if (!currentUser) return;

            // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const { data: userProjects, error } = await supabaseClient
                .from('user_projects')
                .select('*, project_id')
                .eq('user_id', currentUser.id);

            if (!error && userProjects) {
                renderUserProjects(userProjects);
                updateDashboardStats(userProjects);
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ email
            document.getElementById('userEmail').textContent = currentUser.email;
        }

        // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –ø—Ä–æ–µ–∫—Ç—É
        async function joinProject(projectId) {
            if (!currentUser) {
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                openRegisterModal();
                return;
            }

            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –ª–∏ —É–∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                const { data: existing } = await supabaseClient
                    .from('user_projects')
                    .select('*')
                    .eq('user_id', currentUser.id)
                    .eq('project_id', projectId)
                    .single();

                if (existing) {
                    showMessage('–í—ã —É–∂–µ —É—á–∞—Å—Ç–≤—É–µ—Ç–µ –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ!', 'info');
                    closeModal('projectJoinModal');
                    return;
                }

                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É user_projects
                const { error } = await supabaseClient
                    .from('user_projects')
                    .insert([
                        {
                            user_id: currentUser.id,
                            project_id: projectId,
                            status: 'active',
                            joined_at: new Date().toISOString()
                        }
                    ]);

                if (error) throw error;

                showMessage('–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ –ø—Ä–æ–µ–∫—Ç—É!', 'success');
                closeModal('projectJoinModal');
                await loadUserData();

            } catch (error) {
                const errorMessage = getErrorMessage(error);
                showMessage('–û—à–∏–±–∫–∞: ' + errorMessage, 'error');
                console.error('Join project error:', error);
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function renderUserProjects(userProjects) {
            const container = document.getElementById('myProjectsGrid');
            
            if (!userProjects || userProjects.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--color-medium-gray);">
                        <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
                        <a href="#projects" class="btn btn-primary" style="margin-top: 1rem;">–í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</a>
                    </div>
                `;
                return;
            }

            container.innerHTML = '';
            userProjects.forEach(up => {
                const project = projectsData.find(p => p.id === up.project_id);
                if (!project) return;

                const card = document.createElement('div');
                card.className = 'my-project-card';
                card.innerHTML = `
                    <div class="my-project-icon">${project.icon}</div>
                    <div class="my-project-info">
                        <h4>${project.title}</h4>
                        <p>${project.description.substring(0, 100)}...</p>
                        <p style="margin-top: 0.5rem; font-size: 0.85rem;">
                            –î–∞—Ç–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${new Date(up.joined_at).toLocaleDateString('ru-RU')}
                        </p>
                    </div>
                    <div class="my-project-status">–ê–∫—Ç–∏–≤–µ–Ω</div>
                `;
                container.appendChild(card);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–∞—à–±–æ—Ä–¥–∞
        function updateDashboardStats(userProjects) {
            const projectsCount = userProjects.length;
            let totalHours = 0;
            let totalImpact = 0;

            userProjects.forEach(up => {
                const project = projectsData.find(p => p.id === up.project_id);
                if (project) {
                    totalHours += project.hours || 0;
                    totalImpact += Math.floor(project.participants / 10);
                }
            });

            document.getElementById('dashboardProjectsCount').textContent = projectsCount;
            document.getElementById('dashboardHoursCount').textContent = totalHours;
            document.getElementById('dashboardImpactCount').textContent = totalImpact;
        }

        // ============================================
        // MODAL FUNCTIONS
        // ============================================

        function openLoginModal() {
            document.getElementById('loginModal').classList.add('show');
        }

        function openRegisterModal() {
            document.getElementById('registerModal').classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
            // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
            document.querySelectorAll('.error-message').forEach(el => {
                el.classList.remove('show');
                el.textContent = '';
            });
        }

        function switchToRegister() {
            closeModal('loginModal');
            openRegisterModal();
        }

        function switchToLogin() {
            closeModal('registerModal');
            openLoginModal();
        }

        function showMessage(message, type) {
            // –°–æ–∑–¥–∞—ë–º –∫—Ä–∞—Å–∏–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 30px;
                max-width: 400px;
                padding: 1.5rem;
                background: ${type === 'success' ? 'var(--color-green)' : type === 'error' ? 'var(--color-red)' : 'var(--color-dark-gray)'};
                color: white;
                border-radius: 8px;
                box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
                z-index: 10000;
                animation: slideIn 0.4s ease-out;
                font-size: 1rem;
                line-height: 1.5;
            `;
            
            const icon = type === 'success' ? '‚úì' : type === 'error' ? '‚úï' : '‚Ñπ';
            notification.innerHTML = `
                <div style="display: flex; align-items: start; gap: 1rem;">
                    <div style="font-size: 1.5rem; font-weight: bold;">${icon}</div>
                    <div style="flex: 1;">${message}</div>
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª—å –∞–Ω–∏–º–∞—Ü–∏–∏
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from {
                        transform: translateX(400px);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                @keyframes slideOut {
                    from {
                        transform: translateX(0);
                        opacity: 1;
                    }
                    to {
                        transform: translateX(400px);
                        opacity: 0;
                    }
                }
            `;
            if (!document.querySelector('#notification-styles')) {
                style.id = 'notification-styles';
                document.head.appendChild(style);
            }
            
            document.body.appendChild(notification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–±–∏—Ä–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.4s ease-out';
                setTimeout(() => {
                    notification.remove();
                }, 400);
            }, 5000);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É
            notification.addEventListener('click', () => {
                notification.style.animation = 'slideOut 0.4s ease-out';
                setTimeout(() => {
                    notification.remove();
                }, 400);
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–Ω—è—Ç–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–∫–∏
        function getErrorMessage(error) {
            const errorString = error?.message || error?.toString() || '';
            
            // –û—à–∏–±–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            if (errorString.includes('User already registered')) {
                return '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω';
            }
            if (errorString.includes('Email rate limit exceeded')) {
                return '–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç';
            }
            if (errorString.includes('Password should be at least')) {
                return '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤';
            }
            if (errorString.includes('Invalid email')) {
                return '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email –∞–¥—Ä–µ—Å–∞';
            }
            if (errorString.includes('Email not confirmed')) {
                return 'Email –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É';
            }
            
            // –û—à–∏–±–∫–∏ –≤—Ö–æ–¥–∞
            if (errorString.includes('Invalid login credentials')) {
                return '–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å';
            }
            if (errorString.includes('Email not confirmed')) {
                return '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email –ø–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º';
            }
            
            // –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
            if (errorString.includes('duplicate key')) {
                return '–ó–∞–ø–∏—Å—å —Å —Ç–∞–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç';
            }
            if (errorString.includes('violates foreign key')) {
                return '–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ –¥–∞–Ω–Ω—ã—Ö. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É';
            }
            if (errorString.includes('permission denied') || errorString.includes('RLS')) {
                return '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏';
            }
            
            // –û—à–∏–±–∫–∏ —Å–µ—Ç–∏
            if (errorString.includes('Failed to fetch') || errorString.includes('NetworkError')) {
                return '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç';
            }
            if (errorString.includes('timeout')) {
                return '–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞';
            }
            
            // –û–±—â–∏–µ –æ—à–∏–±–∫–∏
            if (errorString.includes('Invalid API key')) {
                return '–û—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase';
            }
            
            // –ï—Å–ª–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
            return errorString || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞';
        }

        function toggleUserDropdown() {
            document.getElementById('userDropdown').classList.toggle('show');
        }

        function showDashboard() {
            document.querySelector('.dashboard-section').classList.add('show');
            document.getElementById('userDropdown').classList.remove('show');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è" –≤ hero
        function handleHeroJoinClick() {
            if (currentUser) {
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –ø–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–æ–µ–∫—Ç–∞–º
                window.location.href = '#projects';
                showMessage('–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç, –∫ –∫–æ—Ç–æ—Ä–æ–º—É —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è', 'info');
            } else {
                // –ï—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
                openRegisterModal();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏ –≤ hero –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function updateHeroButton() {
            const heroBtn = document.getElementById('heroJoinBtn');
            if (heroBtn) {
                if (currentUser) {
                    heroBtn.textContent = '–í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç';
                } else {
                    heroBtn.textContent = '–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è';
                }
            }
        }

        // ============================================
        // FORM HANDLERS
        // ============================================

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('loginBtn');
            const errorEl = document.getElementById('loginError');
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span>';
            errorEl.classList.remove('show');

            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            const result = await login(email, password);

            if (result.success) {
                showMessage('–í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É!', 'success');
                closeModal('loginModal');
                document.getElementById('loginForm').reset();
            } else {
                const errorMessage = getErrorMessage(result.error);
                errorEl.textContent = errorMessage;
                errorEl.classList.add('show');
                showMessage(errorMessage, 'error');
            }

            btn.disabled = false;
            btn.textContent = '–í–æ–π—Ç–∏';
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('registerBtn');
            const errorEl = document.getElementById('registerError');
            
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const phone = document.getElementById('registerPhone').value.trim();
            const region = document.getElementById('registerRegion').value;
            const password = document.getElementById('registerPassword').value;

            // –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
            if (!name || name.length < 3) {
                showMessage('–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞', 'error');
                return;
            }

            if (!email.includes('@') || !email.includes('.')) {
                showMessage('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –∞–¥—Ä–µ—Å', 'error');
                return;
            }

            if (password.length < 6) {
                showMessage('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
                return;
            }

            if (!region) {
                showMessage('–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω', 'error');
                return;
            }
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span>';
            errorEl.classList.remove('show');

            const result = await register(email, password, name, phone, region);

            if (result.success) {
                showMessage('‚úì –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É, –∏—Å–ø–æ–ª—å–∑—É—è –≤–∞—à email –∏ –ø–∞—Ä–æ–ª—å', 'success');
                closeModal('registerModal');
                document.getElementById('registerForm').reset();
                // –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞ - –ø—É—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º —Ä–µ—à–∏—Ç
            } else {
                const errorMessage = getErrorMessage(result.error);
                errorEl.textContent = errorMessage;
                errorEl.classList.add('show');
                showMessage(errorMessage, 'error');
            }

            btn.disabled = false;
            btn.textContent = '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è';
        });

        // ============================================
        // PROJECTS RENDERING
        // ============================================

        function getCategoryName(category) {
            const names = {
                'ecology': '–≠–∫–æ–ª–æ–≥–∏—è',
                'education': '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ',
                'social': '–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å',
                'culture': '–ö—É–ª—å—Ç—É—Ä–∞'
            };
            return names[category] || category;
        }

        // Render projects
        const projectsGrid = document.getElementById('projectsGrid');
        projectsData.forEach((project) => {
            const projectCard = document.createElement('div');
            projectCard.className = `project-card ${project.category}`;
            projectCard.innerHTML = `
                <div class="project-image">
                    ${project.icon}
                    <div class="project-tag">${getCategoryName(project.category)}</div>
                </div>
                <div class="project-content">
                    <h3>${project.title}</h3>
                    <p>${project.description}</p>
                    <div class="project-meta">
                        <span class="project-date">${project.date}</span>
                        <span class="project-participants">${project.participants}+ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span>
                    </div>
                </div>
            `;
            projectCard.addEventListener('click', () => openProjectModal(project));
            projectsGrid.appendChild(projectCard);
        });

        // Filter projects
        const filterButtons = document.querySelectorAll('.filter-btn');
        filterButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                filterButtons.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                const filter = this.getAttribute('data-filter');
                const projects = document.querySelectorAll('.project-card');
                
                projects.forEach(project => {
                    if (filter === 'all' || project.classList.contains(filter)) {
                        project.classList.remove('hidden');
                    } else {
                        project.classList.add('hidden');
                    }
                });
            });
        });

        // Open project modal
        function openProjectModal(project) {
            const modal = document.getElementById('projectJoinModal');
            const content = document.getElementById('projectJoinContent');
            
            content.innerHTML = `
                <h2>${project.icon} ${project.title}</h2>
                <p style="color: var(--color-medium-gray); margin-bottom: 1rem;">${getCategoryName(project.category)} ‚Ä¢ ${project.date}</p>
                <p style="margin-bottom: 1.5rem; line-height: 1.8;">${project.description}</p>
                <div style="background: var(--color-light-gray); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <strong>–£—á–∞—Å—Ç–Ω–∏–∫–∏:</strong> ${project.participants}+ —á–µ–ª–æ–≤–µ–∫<br>
                    <strong>–ß–∞—Å–æ–≤ –≤–æ–ª–æ–Ω—Ç—ë—Ä—Å—Ç–≤–∞:</strong> ${project.hours}—á –≤ –º–µ—Å—è—Ü
                </div>
                <p style="line-height: 1.8; color: var(--color-medium-gray); margin-bottom: 2rem;">
                    –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è –ø–æ–¥–¥–µ—Ä–∂–∫–µ –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤ –∏ –Ω–µ—Ä–∞–≤–Ω–æ–¥—É—à–Ω—ã—Ö –≥—Ä–∞–∂–¥–∞–Ω. 
                    –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ –∏ –≤–Ω–µ—Å–∏—Ç–µ —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –Ω–∞—à–µ–π —Å—Ç—Ä–∞–Ω—ã!
                </p>
                <button class="btn btn-primary" style="width: 100%;" onclick="joinProject(${project.id})">
                    –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –ø—Ä–æ–µ–∫—Ç—É
                </button>
            `;
            
            modal.classList.add('show');
        }

        // ============================================
        // UI INTERACTIONS
        // ============================================

        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const navMenu = document.getElementById('navMenu');

        mobileMenuBtn.addEventListener('click', () => {
            mobileMenuBtn.classList.toggle('active');
            navMenu.classList.toggle('show');
        });

        // Close mobile menu when clicking on a link
        navMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenuBtn.classList.remove('active');
                navMenu.classList.remove('show');
            });
        });

        // Header scroll effect
        window.addEventListener('scroll', () => {
            const header = document.getElementById('header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    // Hide dashboard if navigating away
                    if (this.getAttribute('href') !== '#dashboard') {
                        document.querySelector('.dashboard-section').classList.remove('show');
                    }
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Animated counter
        function animateCounter(element, target, duration = 2000) {
            let start = 0;
            const increment = target / (duration / 16);
            const timer = setInterval(() => {
                start += increment;
                if (start >= target) {
                    element.textContent = target.toLocaleString('ru-RU');
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(start).toLocaleString('ru-RU');
                }
            }, 16);
        }

        // Trigger counters when visible
        const observerStats = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const counters = entry.target.querySelectorAll('.stat-number');
                    counters.forEach(counter => {
                        const target = parseInt(counter.getAttribute('data-target'));
                        animateCounter(counter, target);
                    });
                    observerStats.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        const statsSection = document.querySelector('.stats-section');
        if (statsSection) observerStats.observe(statsSection);

        // Close modal when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('show');
                }
            });
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.user-menu')) {
                document.getElementById('userDropdown').classList.remove('show');
            }
        });

        // ============================================
        // INITIALIZATION
        // ============================================

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Supabase –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('DOMContentLoaded', () => {
            supabaseClient = initSupabase();
            
            if (!supabaseClient) {
                console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Supabase. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:');
                console.error('1. –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_SUPABASE_URL –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL');
                console.error('2. –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_SUPABASE_ANON_KEY –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á');
                console.error('3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É');
                return;
            }
            
            console.log('‚úÖ Supabase —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            checkSession();

            // Listen for auth changes
            supabaseClient.auth.onAuthStateChange((event, session) => {
                if (event === 'SIGNED_IN') {
                    currentUser = session.user;
                    updateUIForLoggedInUser();
                    loadUserData();
                } else if (event === 'SIGNED_OUT') {
                    currentUser = null;
                    updateUIForLoggedOutUser();
                }
            });
        });
    </script>
</body>
</html>